(this["webpackJsonpflugger-front"]=this["webpackJsonpflugger-front"]||[]).push([[0],{41:function(e,t,n){},61:function(e,t,n){},75:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),s=n.n(c),o=n(12),i=(n(41),n(2)),l=n(4);var u=n(10),p=n.n(u),d=n(14),j=n(13),b=n.n(j),h=(n(61),n(1)),v=function(){var e=Object(d.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,e.next=3,b.a.post("".concat("https://fluggerwebscrapperapi.azurewebsites.net/","api/Authenticate"),{userName:n,password:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.setToken,n=Object(a.useState)(),r=Object(l.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(),i=Object(l.a)(o,2),u=i[0],j=i[1],b=function(){var e=Object(d.a)(p.a.mark((function e(n){var a,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,v({username:c,password:u});case 4:a=e.sent,r=a.data.token,s=a.status,console.log("result",s),console.log("token",r),200===s&&(console.log("setToken(token);"),t(r)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),console.log("Wrong credentials");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"authentication",onSubmit:b,children:Object(h.jsxs)("form",{action:"",className:"authentication__form",children:[Object(h.jsxs)("div",{className:"authentication__input-wrapper",children:[Object(h.jsx)("label",{className:"authentication__label",htmlFor:"username",children:"Username"}),Object(h.jsx)("input",{className:"authentication__input",id:"username",onChange:function(e){return s(e.target.value)},placeholder:"Enter your username",type:"text"})]}),Object(h.jsxs)("div",{className:"authentication__input-wrapper",children:[Object(h.jsx)("label",{className:"authentication__label",htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{className:"authentication__input",id:"password",onChange:function(e){return j(e.target.value)},placeholder:"Enter your password",type:"password"})]}),Object(h.jsx)("button",{className:"authentication__submit",type:"submit",children:"Sign in"})]})})},m=n(15),f=n(19),O=n(34),x=n.n(O);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var N=a.createElement("path",{d:"M19 19L14.65 14.65M17 9C17 13.4183 13.4183 17 9 17C4.58172 17 1 13.4183 1 9C1 4.58172 4.58172 1 9 1C13.4183 1 17 4.58172 17 9Z",stroke:"#C1C1C1",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"});function k(e,t){var n=e.title,r=e.titleId,c=w(e,["title","titleId"]);return a.createElement("svg",_({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,N)}var S=a.forwardRef(k),y=(n.p,n(75),function(e){var t=e.token,n=Object(i.f)(),r=Object(a.useState)({}),c=Object(l.a)(r,2),s=c[0],u=c[1],p=Object(a.useState)(!1),d=Object(l.a)(p,2),j=(d[0],d[1]),v=Object(a.useState)([]),g=Object(l.a)(v,2),O=g[0],_=g[1],w=Object(a.useState)(""),N=Object(l.a)(w,2),k=N[0],y=N[1],C={placeholder:"Type product name",value:k,onChange:function(e,t){var n=t.newValue;y(n)}};return Object(h.jsxs)("div",{className:"search-bar__container",children:[Object(h.jsx)("div",{className:"search-bar__icon",children:Object(h.jsx)(S,{})}),Object(h.jsx)(x.a,{inputProps:C,onSuggestionsClearRequested:function(){_([])},onSuggestionsFetchRequested:function(e){!function(e){var n=e.trim().toLowerCase();s[n]?_(s[n]):(j(!0),b.a.get("".concat("https://fluggerwebscrapperapi.azurewebsites.net/","api/suggestions/").concat(e.trim().toLowerCase()),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var t=e.data;_(t),u((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},n,t))})),j(!1)})))}(e.value)},onSuggestionSelected:function(e,t){var a=t.suggestionValue;e.preventDefault(),n.push("/parser-front/products/".concat(a))},getSuggestionValue:function(e){return e.label},renderSuggestion:function(e){return Object(h.jsx)(o.b,{to:"/parser-front/products/".concat(e.label),children:e.label})},suggestions:O})]})}),C=n(36),T=(n(79),function(e){e.availableVolumes;var t,n=e.logoSrc,r=(e.name,e.price,e.products),c=(e.url,Object(a.useState)(!1)),s=Object(l.a)(c,2),o=s[0],i=s[1];return Object(h.jsxs)("div",{className:"alternative-shop",children:[Object(h.jsxs)("div",{className:"alternative-shop__header",children:[Object(h.jsx)("div",{className:"alternative-shop__logo",children:Object(h.jsx)("img",{src:"/images/logos/".concat(n),alt:"",className:"alternative-shop__logo-image"})}),Object(h.jsx)("h2",{className:"alternative-shop__product-name",children:null===(t=r[0])||void 0===t?void 0:t.name}),Object(h.jsx)("div",{className:"alternative-shop__available-volumes",children:null===r||void 0===r?void 0:r.map((function(e){var t=e.size;return Object(h.jsx)("p",{className:"alternative-shop__volume",children:t})}))}),r.length>0&&Object(h.jsx)("button",{className:"alternative-shop__toggle",onClick:function(){return i(!o)},children:"Toggle"})]}),r.length>0&&Object(h.jsx)(C.Collapse,{isOpened:o,children:Object(h.jsx)("div",{className:"alternative-shop__body",children:null===r||void 0===r?void 0:r.map((function(e){var t=e.name,n=e.price,a=e.size;return Object(h.jsxs)("div",{className:"alternative-shop__volume-details",children:[Object(h.jsx)("h3",{className:"alternative-shop__product-name",children:t}),Object(h.jsx)("p",{className:"alternative-shop__volume",children:a}),Object(h.jsxs)("p",{className:"alternative-shop__product-price",children:[n," kr."]})]})}))})})]})}),I=(n(80),["flugger.dk","flugger-helsingor.dk","www.maling-halvpris.dk","www.flugger-horsens.dk"]),E=function(e){var t=e.token,n=Object(i.g)().name,r=Object(a.useState)(),c=Object(l.a)(r,2),s=c[0],o=c[1],u=Object(a.useState)(""),j=Object(l.a)(u,2),v=j[0],g=j[1],m=Object(a.useState)(""),f=Object(l.a)(m,2),O=f[0],x=f[1],_=function(e){I.map((function(t){e[t].length&&"No data"!==e[t][0].pathToImage&&g(e[t][0].pathToImage)}))},w=function(e){I.map((function(t){e[t].length&&x(e[t][0].name)}))};return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat("https://fluggerwebscrapperapi.azurewebsites.net/","api/products/").concat(n),{headers:{Authorization:"Bearer ".concat(t)}});case 2:a=e.sent,console.log("fetched data",a.data),o(a.data),_(a.data),w(a.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(h.jsxs)("div",{className:"product",children:[Object(h.jsxs)("div",{className:"product-overview",children:[Object(h.jsx)("div",{className:"product-overview__thumbnail",children:Object(h.jsx)("img",{alt:"",className:"product-overview__image",src:v})}),Object(h.jsx)("div",{className:"product-overview__information",children:Object(h.jsx)("h1",{className:"product-overview__name",children:O})})]}),Object(h.jsxs)("div",{className:"product-prices",children:[s&&s[I[0]]&&Object(h.jsx)(T,{logoSrc:"".concat(I[0],".png"),products:s[I[0]]}),s&&s[I[1]]&&Object(h.jsx)(T,{logoSrc:"".concat(I[1],".png"),products:s[I[1]]}),s&&s[I[2]]&&Object(h.jsx)(T,{logoSrc:"".concat(I[2],".png"),products:s[I[2]]}),s&&s[I[3]]&&Object(h.jsx)(T,{logoSrc:"".concat(I[3],".png"),products:s[I[3]]})]})]})};n(81);var F=function(){var e=function(){var e=Object(a.useState)((function(){var e=localStorage.getItem("token");return console.log("getToken",e),JSON.parse(e)})),t=Object(l.a)(e,2),n=t[0],r=t[1];return{setToken:function(e){console.log("Setting the token",e),localStorage.setItem("token",JSON.stringify(e)),r(e)},token:n}}(),t=e.token,n=e.setToken;return!t||function(e){if(!e)return!0;var t=function(e){var t;return null===(t=JSON.parse(atob(null===e||void 0===e?void 0:e.split(".")[1])))||void 0===t?void 0:t.exp}(e);return t&&t<=Date.now()/1e3}(t)?(console.log("Removing token",t),localStorage.removeItem("token"),Object(h.jsx)("div",{className:"auth",children:Object(h.jsx)(g,{setToken:n})})):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"search-bar",children:Object(h.jsx)(y,{token:t})}),Object(h.jsx)(i.c,{children:Object(h.jsx)(i.a,{component:E,path:"/parser-front/products/:name",token:t})})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(o.a,{children:Object(h.jsx)(F,{})})}),document.getElementById("root")),z()}},[[82,1,2]]]);
//# sourceMappingURL=main.32f12b58.chunk.js.map